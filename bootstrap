#!/bin/bash
# 阿里云函数计算自定义运行时 Bootstrap 脚本
# 必须命名为 bootstrap 且具有可执行权限

set -e

echo "========================================"
echo "🚀 Bootstrap 启动"
echo "========================================"
echo "当前目录: $(pwd)"
echo "目录内容:"
ls -la
echo "========================================"
echo "Python 版本: $(python --version)"
echo "Python 路径: $(which python)"
echo "========================================"
echo "环境变量:"
echo "FC_SERVER_PORT=${FC_SERVER_PORT}"
echo "FC_RUNTIME=${FC_RUNTIME}"
echo "FC_FUNCTION_NAME=${FC_FUNCTION_NAME}"
echo "========================================"

# 切换到代码目录
cd /code

echo "切换到 /code 目录"
echo "目录内容:"
ls -la

# 启动 MCP 服务器
echo "========================================"
echo "🚀 启动 MCP 服务器..."
echo "========================================"

exec python mcp_server.py
